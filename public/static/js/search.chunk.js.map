{"version":3,"file":"search.chunk.js","sources":["webpack:///src/components/views/search-view/search-view.jsx","webpack:///src/components/views/search-view/search-result/search-result.jsx","webpack:///./src/components/views/search-view/search-result/search-result.scss","webpack:///./src/components/views/search-view/search-view.scss","webpack:///./src/components/views/search-view/search-result/search-result.scss?f428","webpack:///./src/components/views/search-view/search-view.scss?f75d"],"sourcesContent":["import React, { PropTypes } from 'react';\nimport { connect } from 'react-redux';\nimport withStyles from 'isomorphic-style-loader/lib/withStyles';\nimport URLSearchParams from 'url-search-params';\n\nimport { toggleSearch, toggleWaterfallHeader, progressUpdate } from '../../../actions/utils';\nimport { search } from '../../../actions/page-list';\n\nimport SearchResult from './search-result/search-result';\n\nimport s from './search-view.scss';\n\nclass SearchResults extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currQuery: this._fetchSearchParam()\n    };\n  }\n\n  componentWillMount() {    \n    this.props.toggleWaterfallHeader(false);\n    this.props.progressUpdate(100);\n    this.props.toggleSearch(true);\n\n    this.props.search(this._fetchSearchParam());\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      currQuery: nextProps.currQuery\n    })\n\n    this._updateSearchParam(nextProps.currQuery);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.pageList.length < 1 && this.props.pageList.length >= 1) {\n      this.props.search(this._fetchSearchParam());\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.toggleSearch(false);\n    this.props.search('');\n  }\n\n  _fetchSearchParam() {\n    const url = new URL(this.props.location);\n    const searchParams = new URLSearchParams(url.search)\n    for (let p of searchParams) {\n      if (p[0] === \"search\") return p[1];\n    }\n    return \"\";\n  }\n\n  _updateSearchParam(query) {\n    const url = new URL(this.props.location);\n    const searchParams = new URLSearchParams(url.search)\n    searchParams.set('search', query);\n    url.search = searchParams.toString();\n    window.history.replaceState(null, null, url.href)\n  }\n\n  mapResults() {\n    if (this.props.currQuery.length < 1) {\n      return [];\n    }\n    const results = this.props.activePages.map((page) => {\n      return (\n        <SearchResult\n          key={page.sys.id}\n          currQuery={this.state.currQuery}\n          page={page}\n        />\n      );\n    });\n    return results;\n  }\n\n  render() {\n    return (\n      <div className={s['search-container']}>\n        <div className={s['search-results']}>\n          <h1 className={s['search-title']}>\n            Results for <span className={s['search-query']}>{this.state.currQuery}</span>\n          </h1>\n          {this.mapResults()}\n        </div>\n      </div>\n    );\n  }\n}\n\nSearchResults.propTypes = {\n  currQuery: PropTypes.string.isRequired,\n  activePages: PropTypes.array.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    searchOpen: state.utils.activePages,\n    currQuery: state.pageList.query,\n    activePages: state.pageList.activePages,\n    pageList: state.pageList.entries,\n  };\n}\n\nfunction matchDispatchToProps(dispatch) {\n  return {\n    search: (query) => { dispatch(search(query)); },\n    toggleSearch: (open) => { dispatch(toggleSearch(open)); },\n    toggleWaterfallHeader: (visible) => { dispatch(toggleWaterfallHeader(visible)); },\n    progressUpdate: (percentage) => { dispatch(progressUpdate(percentage)); },\n  };\n}\n\nexport default withStyles(s)(connect(mapStateToProps, matchDispatchToProps)(SearchResults));\n\n\n\n// WEBPACK FOOTER //\n// src/components/views/search-view/search-view.jsx","import React, { PropTypes } from 'react';\nimport withStyles from 'isomorphic-style-loader/lib/withStyles';\nimport Link from '../../../route-handler/link/link';\nimport Ripple from '../../../common/ripple/ripple';\nimport s from './search-result.scss';\n\nclass SearchResult extends React.Component {\n  render() {\n    const page = this.props.page;\n    const category = page.fields.category;\n    const specification = category.fields.specification;\n\n    const reg = new RegExp(this.props.currQuery, 'gi');\n\n    const formattedName = page.fields.name.replace(reg, (str) => { return `<b>${str}</b>`; });\n    const formattedCat = category.fields.name.replace(reg, (str) => { return `<b>${str}</b>`; });\n    const formattedSpec = specification.fields.name.replace(reg, (str) => { return `<b>${str}</b>`; });\n\n    return (\n      <div className={s['result-container']}>\n        <Link route={this.props.page.fields.route}>\n          <div className={s.result}>\n            <p className={s['result-title']} dangerouslySetInnerHTML={{ __html: formattedName }} />\n            <p className={s['result-url']}>{ page.fields.route }</p>\n            <p className={s['result-route']} dangerouslySetInnerHTML={{ __html: `${formattedSpec} > ${formattedCat} > ${formattedName}` }} />\n            <div className={s.ripple}>\n              <Ripple />\n            </div>\n          </div>\n        </Link>\n      </div>\n    );\n  }\n}\n\nSearchResult.propTypes = {\n  currQuery: PropTypes.string.isRequired,\n  page: PropTypes.object.isRequired,\n};\n\nexport default withStyles(s)(SearchResult);\n\n\n\n// WEBPACK FOOTER //\n// src/components/views/search-view/search-result/search-result.jsx","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \":root {\\n  --mdc-theme-primary: #00b4a2; }\\n\\n@-webkit-keyframes search-result_fadeIn_1SK {\\n  from {\\n    opacity: 0; }\\n  to {\\n    opacity: 1; } }\\n\\n@keyframes search-result_fadeIn_1SK {\\n  from {\\n    opacity: 0; }\\n  to {\\n    opacity: 1; } }\\n\\n.search-result_result-container_3AI {\\n  width: 100%; }\\n\\n.search-result_result_1TT {\\n  display: block;\\n  position: relative;\\n  overflow: hidden;\\n  padding: 4px 0 25px 0;\\n  border-bottom: 1px solid #324047;\\n  cursor: pointer;\\n  text-decoration: none; }\\n  @media (max-width: 500px) {\\n    .search-result_result_1TT {\\n      padding: 0px 8px 0px 48px;\\n      border-bottom: none; } }\\n\\n.search-result_ripple_2Lj {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  overflow: hidden; }\\n  @media (min-width: 500px) {\\n    .search-result_ripple_2Lj {\\n      display: none; } }\\n\\n.search-result_result-title_2o5 {\\n  color: #00b4a2;\\n  font-size: 24px; }\\n  @media (max-width: 500px) {\\n    .search-result_result-title_2o5 {\\n      color: #373737;\\n      font-size: 16px;\\n      margin: 16px 0; } }\\n\\n.search-result_result-url_39b {\\n  font-size: 13px;\\n  color: #007468;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis; }\\n  @media (max-width: 500px) {\\n    .search-result_result-url_39b {\\n      display: none; } }\\n\\n.search-result_result-route_2t2 {\\n  color: #373737;\\n  font-size: 13px;\\n  line-height: 24px; }\\n  @media (max-width: 500px) {\\n    .search-result_result-route_2t2 {\\n      display: none; } }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"result-container\": \"search-result_result-container_3AI\",\n\t\"result\": \"search-result_result_1TT\",\n\t\"ripple\": \"search-result_ripple_2Lj\",\n\t\"result-title\": \"search-result_result-title_2o5\",\n\t\"result-url\": \"search-result_result-url_39b\",\n\t\"result-route\": \"search-result_result-route_2t2\",\n\t\"fadeIn\": \"search-result_fadeIn_1SK\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?modules&localIdentName=[name]_[local]_[hash:base64:3]!./~/postcss-loader?{}!./~/sass-loader/lib/loader.js!./src/components/views/search-view/search-result/search-result.scss\n// module id = 745\n// module chunks = 1","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \":root {\\n  --mdc-theme-primary: #00b4a2; }\\n\\n@-webkit-keyframes search-view_fadeIn_2te {\\n  from {\\n    opacity: 0; }\\n  to {\\n    opacity: 1; } }\\n\\n@keyframes search-view_fadeIn_2te {\\n  from {\\n    opacity: 0; }\\n  to {\\n    opacity: 1; } }\\n\\n@-webkit-keyframes search-view_flyIn_3G1 {\\n  0% {\\n    opacity: 0;\\n    -webkit-transform: translateY(-20px);\\n            transform: translateY(-20px); }\\n  50% {\\n    -webkit-transform: translateY(0);\\n            transform: translateY(0); }\\n  100% {\\n    opacity: 1; } }\\n\\n@keyframes search-view_flyIn_3G1 {\\n  0% {\\n    opacity: 0;\\n    -webkit-transform: translateY(-20px);\\n            transform: translateY(-20px); }\\n  50% {\\n    -webkit-transform: translateY(0);\\n            transform: translateY(0); }\\n  100% {\\n    opacity: 1; } }\\n\\n.search-view_search-container_2O3 {\\n  -webkit-box-flex: 1;\\n      -ms-flex: 1;\\n          flex: 1;\\n  width: 75%;\\n  padding: 80px 0;\\n  margin: 0 auto; }\\n  @media (max-width: 500px) {\\n    .search-view_search-container_2O3 {\\n      width: 100%;\\n      padding: 8px 0; } }\\n\\n.search-view_search-results_2gn {\\n  padding: 16px; }\\n  @media (max-width: 500px) {\\n    .search-view_search-results_2gn {\\n      padding: 0; } }\\n\\n.search-view_search-title_3v_ {\\n  font-weight: 400; }\\n  @media (max-width: 500px) {\\n    .search-view_search-title_3v_ {\\n      display: none; } }\\n\\n.search-view_search-query_1To {\\n  color: #00b4a2;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"search-container\": \"search-view_search-container_2O3\",\n\t\"search-results\": \"search-view_search-results_2gn\",\n\t\"search-title\": \"search-view_search-title_3v_\",\n\t\"search-query\": \"search-view_search-query_1To\",\n\t\"fadeIn\": \"search-view_fadeIn_2te\",\n\t\"flyIn\": \"search-view_flyIn_3G1\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?modules&localIdentName=[name]_[local]_[hash:base64:3]!./~/postcss-loader?{}!./~/sass-loader/lib/loader.js!./src/components/views/search-view/search-view.scss\n// module id = 746\n// module chunks = 1","\n    var content = require(\"!!../../../../../node_modules/css-loader/index.js?modules&localIdentName=[name]_[local]_[hash:base64:3]!../../../../../node_modules/postcss-loader/index.js??ref--1-2!../../../../../node_modules/sass-loader/lib/loader.js!./search-result.scss\");\n    var insertCss = require(\"!../../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?modules&localIdentName=[name]_[local]_[hash:base64:3]!../../../../../node_modules/postcss-loader/index.js??ref--1-2!../../../../../node_modules/sass-loader/lib/loader.js!./search-result.scss\", function() {\n        content = require(\"!!../../../../../node_modules/css-loader/index.js?modules&localIdentName=[name]_[local]_[hash:base64:3]!../../../../../node_modules/postcss-loader/index.js??ref--1-2!../../../../../node_modules/sass-loader/lib/loader.js!./search-result.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/views/search-view/search-result/search-result.scss\n// module id = 752\n// module chunks = 1","\n    var content = require(\"!!../../../../node_modules/css-loader/index.js?modules&localIdentName=[name]_[local]_[hash:base64:3]!../../../../node_modules/postcss-loader/index.js??ref--1-2!../../../../node_modules/sass-loader/lib/loader.js!./search-view.scss\");\n    var insertCss = require(\"!../../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../../node_modules/css-loader/index.js?modules&localIdentName=[name]_[local]_[hash:base64:3]!../../../../node_modules/postcss-loader/index.js??ref--1-2!../../../../node_modules/sass-loader/lib/loader.js!./search-view.scss\", function() {\n        content = require(\"!!../../../../node_modules/css-loader/index.js?modules&localIdentName=[name]_[local]_[hash:base64:3]!../../../../node_modules/postcss-loader/index.js??ref--1-2!../../../../node_modules/sass-loader/lib/loader.js!./search-view.scss\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/views/search-view/search-view.scss\n// module id = 753\n// module chunks = 1"],"mappings":";;;;;;;;;;;;;;AAAA;AACA;;;AAAA;AACA;AAAA;AACA;;;AAAA;AACA;;;AACA;AACA;AAAA;AACA;AACA;AACA;;;AACA;AACA;;;;;;;;;;;AACA;;;AAEA;AAAA;AACA;AADA;AACA;AACA;AACA;AADA;AAFA;AAKA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AADA;AACA;AAGA;AACA;;;AAEA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAGA;AAAA;AACA;AAAA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AADA;AAGA;AAJA;AADA;AASA;;;;AAhFA;AACA;AAkFA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAJA;AAMA;AACA;AACA;;;;;;;;;;;;;;;;ACtHA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;;;;;;;;;AACA;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AADA;AAJA;AADA;AADA;AAaA;;;;AA1BA;AACA;AA4BA;AACA;AACA;AAFA;AACA;AAIA;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}